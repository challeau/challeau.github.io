<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- General information -->
    <title>challeau's website</title>
    <meta name="description" content="My portfolio website.">
    <meta name="author" content="challeau">
    <meta charset="utf-8" />
    <base href=""/>

    <!-- Open Graph settings -->
    <meta property="og:title" content="challeau's website">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://challeau.github.io/">
    <meta property="og:description" content="My portfolio website.">
    <meta property="og:image" content="style/icon/logo.png">

    <!-- Viewport settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Link the stylesheet -->
    <link rel="stylesheet" href="style/style.css" />

    <!-- Custom fonts -->
    <style>
      @font-face {
	  font-family: MonumentExtended;
	  src: url('style/fonts/MonumentExtended-Regular.otf') format('opentype');
      }

      @font-face {
	  font-family: MonumentExtended;
	  font-weight: bold;
	  src: url('style/fonts/MonumentExtended-Ultrabold.otf') format('opentype');
      }
    </style>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="style/icon/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="style/icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="style/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="style/icon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">

    <!-- JS scripts-->

  </head>

  <body>
    <header>
    </header>
    <nav>
      <ul class="navbar">
        <li><a class="active" href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </nav>

    <div class="firstGlance">
      <div class="logoName">
	<img alt="logoName" src="style/icon/logo-name-nobg.png"/>
      </div>
    </div>

    <div class="text-contents">
      <article>
	<h2>Here's an article</h2>
	<p>
	  Pikachu ipsum dolor sit amet dugtrio cloyster omanyte cubone, eevee raichu staryu doduo parasect ninetales poliwag. Krabby abra rhyhorn porygon poliwrath aerodactyl victreebel kadabra. Flareon venomoth chansey moltres tentacruel. Pikachu meowth nidoran raticate gyrados machoke eevee, lickitung kabutops pidgey pinsir fearow persian.
	  <br/>
	  Raichu farfetchd jigglypuff tentacruel nidoking shellder marowak electrode persian wigglytuff gloom cubone. Hitmonlee kabuto growlithe alakazam, gengar graveler arbok omanyte golduck aerodactyl geodude magnemite voltorb tentacool goldeen. Magikarp seaking staryu cubone wigglytuff, sandshrew mewtwo. Beedrill marowak seaking articuno dewgong, arcanine graveler machamp vaporeon rapidash lickitung. Bulbasaur cloyster butterfree, kabuto pidgeotto sandshrew drowzee. Doduo scyther krabby hitmonlee lickitung tauros golem kadabra jynx electrode.
	</p>
	<p>
	  Meowth machoke zubat, weepinbell dragonair wigglytuff graveler. Dodrio tentacool dragonair ninetales fearow, seadra porygon. Machoke weedle kakuna oddish marowak doduo hitmonchan ponyta snorlax poliwrath golbat dragonite. Tangela ninetales nidoking, persian zubat bulbasaur flareon fearow drowzee pidgeotto jynx. Golem vulpix dratini ekans moltres cloyster marowak shellder mewtwo victreebel rattata.
	  <br/>
	  Flareon arbok rhydon venusaur ditto, farfetchd clefable omanyte ninetales exeggcute vulpix. Eevee raticate Mr. Mime victreebel pikachu gengar blastoise, haunter wigglytuff venusaur jynx drowzee. Meowth primeape machoke dugtrio clefable, arbok slowbro zapdos. Poliwag electabuzz farfetchd tentacruel, beedrill blastoise venusaur raticate nidoran omanyte mewtwo electrode voltorb cloyster bulbasaur. Nidoking staryu nidoqueen, grimer hitmonchan diglett zubat metapod exeggutor pidgeotto bellsprout seaking.
	</p>
	<p>
	  Meowth gloom cloyster fearow seaking. Beedrill raticate alakazam drowzee zapdos, gastly ninetales abra paras pidgeotto. Cubone starmie machoke koffing mewtwo. Vileplume slowbro venusaur dodrio vulpix shellder mewtwo pidgey wigglytuff zapdos goldeen parasect hypno ponyta growlithe. Starmie graveler krabby pidgeot diglett, mew gyrados exeggcute staryu ivysaur nidoqueen caterpie dragonair haunter.
	  <br/>
	  Vaporeon hitmonlee tangela zubat onix. Marowak wigglytuff cloyster squirtle. Clefairy arbok weedle electrode, nidoran paras slowpoke pidgeotto dugtrio ekans gyrados cloyster articuno. Dodrio venusaur mewtwo venonat oddish poliwrath ponyta sandshrew arcanine haunter zapdos drowzee.
	</p>
	<p>
	  Tauros oddish clefable pidgey, cubone caterpie goldeen graveler primeape ponyta omastar spearow dewgong. Graveler machoke starmie squirtle abra hypno venomoth rapidash exeggcute pidgey moltres scyther venonat haunter. Paras lapras jigglypuff drowzee, venonat goldeen kadabra haunter kingler arbok nidoran. Drowzee moltres bellsprout alakazam jigglypuff hitmonchan pidgeot dodrio. Ponyta rhyhorn onix goldeen exeggcute.
	</p>
      </article>
    </div>
  </body>

  <script>
    /* resize logo proportionally to scroll*/
    window.addEventListener('scroll', function() {
      let container = document.getElementsByClassName('firstGlance')[0];
      let logo = document.getElementsByClassName('logoName')[0];
      let navbar = document.getElementsByClassName('navbar')[0];
      let containerBottom = container.getBoundingClientRect().bottom;
      let offsetY = containerBottom / (0.75 * window.innerHeight);
      if (containerBottom > 0 && containerBottom <= (window.innerHeight || document.documentElement.clientHeight))	
      {
    	let logoNewSize = 75 - (1 - offsetY) * 100;
    	let containerNewMargin = 25 - (1 - offsetY) * 100;
    	if (logoNewSize > 15)
    	{
    	  logo.style.width = logoNewSize + 'vh';
    	  logo.style.height = logoNewSize + 'vh';
	  if (containerNewMargin > 5){
	    container.style.margin = '-1rem -1rem ' + containerNewMargin + 'vh';
	    console.log(container.style.margin);
	  }
    	}
    	else
    	{
    	  logo.style.width = '15vh';
    	  logo.style.height = '15vh';
    	}
      }
    });

    /* move elements */
    var _containerHeight = 4000;
    var _width, _height, _scrollHeight;
    var _movingElements = [];
    var _scrollPercent = 0;
    var pre = prefix();
    var _jsPrefix = pre.lowercase;
    if (_jsPrefix == 'moz') _jsPrefix = 'Moz'
    var _cssPrefix = pre.css;
    var _positions = [
      {
	name: 'logoName',
	start: {
	  percent: 0.01,
	  x: 0.12,
	  y: 0.0025
	},
	end: {
	  percent: 0.05,
	  x: -0.02,
	  y: 0.0
	}
      },
      {
      	name: 'navbar',
      	start: {
      	  percent: 0.01,
      	  x: 0.0,
      	  y: 0.0
      	},
      	end: {
      	  percent: 0.05,
      	  x: 0.2,
      	  y: 0.0
      	}
      }
    ]

    resize();
    initMovingElements();

    function initMovingElements() {
      for (var i = 0; i < _positions.length; i++) {
	_positions[i].diff = {
	  percent: _positions[i].end.percent - _positions[i].start.percent,
	  x: _positions[i].end.x - _positions[i].start.x,
	  y: _positions[i].end.y - _positions[i].start.y,
	}
	_positions[i].target = {};
	_positions[i].current = {};
	var el = document.getElementsByClassName(_positions[i].name)[0];
	_movingElements.push(el);
      }
    }

    function resize() {
      _width = window.innerWidth;
      _height = window.innerHeight;
      _scrollHeight = _containerHeight - _height;
    }

    function updateElements() {
      for (var i = 0; i < _movingElements.length; i++) {
	var p = _positions[i];
	if (_scrollPercent <= p.start.percent) {
	  p.target.x = p.start.x * _width;
	  p.target.y = p.start.y * _containerHeight;
	} else if (_scrollPercent >= p.end.percent) {
	  p.target.x = p.end.x * _width;
	  p.target.y = p.end.y * _containerHeight;
	} else {
	  p.target.x = p.start.x * _width + (p.diff.x * (_scrollPercent - p.start.percent) / p.diff.percent * _width);
	  p.target.y = p.start.y * _containerHeight + (p.diff.y * (_scrollPercent - p.start.percent) / p.diff.percent * _containerHeight);
	}

	// lerp
	if (!p.current.x) {
	  p.current.x = p.target.x;
	  p.current.y = p.target.y;
	} else {
	  p.current.x = p.current.x + (p.target.x - p.current.x) * 0.1;
	  p.current.y = p.current.y + (p.target.y - p.current.y) * 0.1;
	}
	_movingElements[i].style[_jsPrefix + 'Transform'] = 'translate3d(' + p.current.x + 'px, ' +
	  p.current.y + 'px, 0px)';
      }
    }



    function loop() {
      _scrollOffset = window.pageYOffset || window.scrollTop;
      _scrollPercent = _scrollOffset / _scrollHeight || 0;
      updateElements();

      requestAnimationFrame(loop);
    }

    loop();

    window.addEventListener('resize', resize);

    /* prefix detection http://davidwalsh.name/vendor-prefix */

    function prefix() {
      var styles = window.getComputedStyle(document.documentElement, ''),
	  pre = (Array.prototype.slice
		 .call(styles)
		 .join('')
		 .match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])
		)[1],
	  dom = ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];
      return {
	dom: dom,
	lowercase: pre,
	css: '-' + pre + '-',
	js: pre[0].toUpperCase() + pre.substr(1)
      };
    }

  </script>

</html>
